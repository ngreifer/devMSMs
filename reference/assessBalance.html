<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Assesses confounder balancing — assessBalance • devMSMs</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Assesses confounder balancing — assessBalance"><meta property="og:description" content="Draws on functions from the cobalt package to quantify the relations between
exposure and confounders at each exposure time point according to the
guidelines from Jackson, 2016 on how to assess balance for time-varying
exposures."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">devMSMs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assesses confounder balancing</h1>
    
    <div class="hidden name"><code>assessBalance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Draws on functions from the cobalt package to quantify the relations between
exposure and confounders at each exposure time point according to the
guidelines from Jackson, 2016 on how to assess balance for time-varying
exposures.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">assessBalance</span><span class="op">(</span></span>
<span>  <span class="va">home_dir</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">exposure</span>,</span>
<span>  <span class="va">exposure_time_pts</span>,</span>
<span>  <span class="va">outcome</span>,</span>
<span>  <span class="va">tv_confounders</span>,</span>
<span>  <span class="va">type</span>,</span>
<span>  <span class="va">formulas</span>,</span>
<span>  weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  balance_thresh <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  imp_conf <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  save.out <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>home_dir</dt>
<dd><p>(optional) path to home directory (required if save.out =
TRUE)</p></dd>


<dt>data</dt>
<dd><p>data in wide format as: a data frame, list of imputed data
frames, or mids object</p></dd>


<dt>exposure</dt>
<dd><p>name of exposure variable</p></dd>


<dt>exposure_time_pts</dt>
<dd><p>list of integers at which weights will be
created/assessed that correspond to time points when exposure wass measured</p></dd>


<dt>outcome</dt>
<dd><p>name of outcome variable with ".timepoint" suffix</p></dd>


<dt>tv_confounders</dt>
<dd><p>list of time-varying confounders with ".timepoint"
suffix</p></dd>


<dt>type</dt>
<dd><p>type of balance assessment; 'prebalance' or 'weighted'</p></dd>


<dt>formulas</dt>
<dd><p>list of balancing formulas at each time point output from
createFormulas()</p></dd>


<dt>weights</dt>
<dd><p>list of IPTW weights output from createWeights, required for
type 'weighted'</p></dd>


<dt>balance_thresh</dt>
<dd><p>(optional) one or two numbers between 0 and 1
indicating a single balancing threshold or thresholds for more and less
important confounders, respectively (default = 0.1)</p></dd>


<dt>imp_conf</dt>
<dd><p>(optional) list of variable names reflecting important
confounders, required if two balance thresholds are supplied</p></dd>


<dt>verbose</dt>
<dd><p>(optiona) TRUE or FALSE indicator for user output (default is
TRUE)</p></dd>


<dt>save.out</dt>
<dd><p>(optional) TRUE or FALSE indicator to save output and
intermediary output locally (default is TRUE)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>a data frame of balance statistics</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>cobalt package,
<a href="https://cran.r-project.org/web/packages/cobalt/index.html" class="external-link">https://cran.r-project.org/web/packages/cobalt/index.html</a></p>
<p>Jackson, 2016 for more on assessing balance for time-varying
exposures, <a href="https://pubmed.ncbi.nlm.nih.gov/27479649/" class="external-link">https://pubmed.ncbi.nlm.nih.gov/27479649/</a></p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>ID <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">50</span>,</span></span>
<span class="r-in"><span>                   A.1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   A.2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   A.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   B.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   C <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   D.3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">50</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">test</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">test</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span><span class="op">)</span><span class="op">]</span>, <span class="va">as.numeric</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="createFormulas.html">createFormulas</a></span><span class="op">(</span>exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                    exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                    tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                    ti_confounders <span class="op">=</span> <span class="st">"C"</span>,</span></span>
<span class="r-in"><span>                    type <span class="op">=</span> <span class="st">"short"</span>,</span></span>
<span class="r-in"><span>                    save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A-D.3 at A time point 1 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.1 ~ C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x5613d26e3810&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A-D.3 at A time point 2 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.2 ~ A.1 + B.1 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x5613d26e3810&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: Please manually inspect the short balancing formula below that includes time-varying confounders at t-1 only:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The short formula for A-D.3 at A time point 3 is: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A.3 ~ A.2 + B.2 + C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;environment: 0x5613d26e3810&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#Prebalance</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>             using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-2.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-3.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, for exposure A using no weights, and short formulas, 3 out of 7 (43%) covariates across time points corresponding to 3 out of 2 domains remain imbalanced with a remaining average absolute value correlation/std mean difference of 0.11 (range= -0.16-0.11) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          0|            1|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          1|            2|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-4.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-5.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-6.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.16-0.11). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, the following 3 covariates across time points out of 7 total (42.86%) spanning 3 domains out of 4 (75%) are imbalanced with a remaining median absolute value correlation/std mean difference in relation to A of 0.11 (range=-0.16-0.11) :  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced Covariates</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |   |exposure | exp_time|covar_time |covariate |    avg_bal| bal_thresh| balanced|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |:--|:--------|--------:|:----------|:---------|----------:|----------:|--------:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |1  |A        |        1|0          |1         | -0.1088841|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |5  |A        |        3|2          |A.2       |  0.1091452|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |6  |A        |        3|2          |B.2       | -0.1630596|        0.1|        0|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>             using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-7.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-8.png" alt="" width="700" height="433"></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>no non-missing arguments to min; returning Inf</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>no non-missing arguments to max; returning -Inf</span>
<span class="r-plt img"><img src="assessBalance-9.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, for exposure A using no weights, and short formulas, 0 out of 7 (0%) covariates across time points corresponding to 0 out of 2 domains remain imbalanced with a remaining average absolute value correlation/std mean difference of NA (range= Inf--Inf) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-10.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-11.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-12.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.16-0.11). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> There are no imbalanced covariates. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> There are no imbalanced covariates.</span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"prebalance"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   imp_conf <span class="op">=</span> <span class="st">"B.1"</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> USER ALERT: The following statistics display covariate imbalance at each exposure time point prior to weighting,</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>             using short formulas.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-13.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-14.png" alt="" width="700" height="433"></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>no non-missing arguments to min; returning Inf</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>no non-missing arguments to max; returning -Inf</span>
<span class="r-plt img"><img src="assessBalance-15.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> As shown below, for exposure A using no weights, and short formulas, 0 out of 7 (0%) covariates across time points corresponding to 0 out of 2 domains remain imbalanced with a remaining average absolute value correlation/std mean difference of NA (range= Inf--Inf) : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table: Imbalanced covariates using no weights and short formulas</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> | exp_time| balanced_n| imbalanced_n|  n|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |--------:|----------:|------------:|--:|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        1|          1|            0|  1|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        2|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> |        3|          3|            0|  3|</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-plt img"><img src="assessBalance-16.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-17.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="assessBalance-18.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> USER ALERT: For exposure A using the short formulas and no weights : </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The median absolute value relation between exposure and confounder is 0.09 (range = -0.16-0.11). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> There are no imbalanced covariates. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> There are no imbalanced covariates.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Weighted</span></span></span>
<span class="r-in"><span><span class="va">w</span> <span class="op">&lt;-</span> <span class="fu"><a href="createWeights.html">createWeights</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in weightit2cbps.cont(covs = covs, treat = treat, subset = by.factor ==     i, s.weights = s.weights, missing = missing, verbose = verbose,     ...):</span> The package "CBPS" is required.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'w' not found</span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fl">0.2</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'w' not found</span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu">assessBalance</span><span class="op">(</span>data <span class="op">=</span> <span class="va">test</span>,</span></span>
<span class="r-in"><span>                   exposure <span class="op">=</span> <span class="st">"A"</span>,</span></span>
<span class="r-in"><span>                   exposure_time_pts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   outcome <span class="op">=</span> <span class="st">"D.3"</span>,</span></span>
<span class="r-in"><span>                   tv_confounders <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A.1"</span>, <span class="st">"A.2"</span>, <span class="st">"A.3"</span>, <span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   type <span class="op">=</span> <span class="st">"weighted"</span>,</span></span>
<span class="r-in"><span>                   weights <span class="op">=</span> <span class="va">w</span>,</span></span>
<span class="r-in"><span>                   formulas <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>                   balance_thresh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                   imp_conf <span class="op">=</span> <span class="st">"B.1"</span>,</span></span>
<span class="r-in"><span>                   save.out <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in eval(expr, envir, enclos):</span> object 'w' not found</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Isabella Stallworthy, Meriah DeJoseph, Emily Padrutt, Noah Greifer, Daniel Berry.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

